<% include ../partials/header %>
<% include ../partials/alerts %>
<% include ../partials/nav %>

<main id="admin"">

<section id="page--content" class="admin main">
    <div class="container">
        <form id="page" action="/properties/<%= prop.slug %>?_method=PUT" method="POST" autocomplete="off" >
            <div class="col-sm-12 col-md-8 offset-md-2">
                <!-- Page Version -->
                <h3>Edit "<%= prop.title %>"</h3>
                <div class="updated">
                    <p>Last update by <%= prop.author.username %> on <strong><%= prop.updated.toLocaleString("en-GB") %></strong></p>
                </div>
                
                <div class="row">
                    <div class="col-5">
                        <div class="form-group">
                            <label>Title</label>
                            <input class="form-control" type="text" name="page[title]" value="<%= prop.title %>" required>
                        </div>
                    </div>
                    <div class="col-7">
                        <div class="form-group">
                            <label>URL</label>
                            <div class="form--input__url">
                                <input id="domain-url" class="form-control" type="text" name="page[slug]" value="<%= prop.slug %>"  required/>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-7">
                        <div class="form-group">
                            <label>Location</label>
                            <input class="form-control" type="text" name="page[location]" value="<%= prop.location %>" required>
                            <!-- hidden input for  -->
                        </div>
                    </div>

                    <div class="col-5">
                        <div class="form-group">
                            <label>Status</label>
                            <div class="form--input__url">
                                <select class="form-control" type="text" name="page[status]" >
                                    <% var choices = ['new', 'resale', 'sold']; %>
                                    <% for (var i = 0; i < choices.length; i++) { %>
                                        <% if (choices[i] === prop.status) {%>
                                            <option value="<%= prop.status %>" selected><%= prop.status %></option>
                                        <% } else { %>
                                            <option value="<%= choices[i] %>"><%= choices[i] %></option>
                                         <% } %>
                                    <% } %>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <hr />

                <div class="row">
                    <div class="col-12">
                        <div class="image-upload" class="form-group">
                            <label>Main Property Image</label>
                            <input type="hidden" value="<%= prop.mImage %>" name="page[mImage]" />
                            <input type="file" class="form-control file-input" accept=".jpg,.png"  >
                            <img class="previewImage" src="<%= prop.mImage %>" />
                            <progress class="progress" value="0"></progress>
                            <a href="#" id="changeMIBtn" class="btn btn-admin">Change this image</a>
                        </div>
                    </div>
                </div>


                <hr />

                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label>Development Description</label>
                            <textarea class="form-control" type="text" name="page[devDesc]" required><%= prop.devDesc %></textarea>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-12">
                        <div class="form-group">
                            <label>Property Description</label>
                            <textarea class="form-control" type="text" name="page[propDesc]" required><%= prop.propDesc %></textarea>
                        </div>
                    </div>
                </div>


                <hr />

                <div class="row">
                    <div class="col-12">
                        <div id="GI-cont" class="image-upload" class="form-group">
                            <label>Gallery Images</label>
                            <% if (prop.gImage) {%>
                                <% for (var i = 0; i < prop.gImage.length; i++) { %>
                                    <div class="eachImage">
                                        <input type="hidden" value="<%= prop.gImage[i] %>" name="page[gImage]" />
                                        <img class="previewImage" src="<%= prop.gImage[i] %>" />
                                        <progress class="progress" value="0"></progress>
                                        <a href="#" class="btn dlt-gi">Delete Image</a>
                                    </div>
                                <% } %>
                            <% } %>
                            <div id="GI-clone" class="eachImage">
                                <input type="hidden" data-name="page[gImage]" />
                                <input type="file" class="form-control file-input" accept=".jpg,.png" placeholder="Upload Image">
                                <img class="previewImage" src="" />
                                <progress class="progress" value="0"></progress>
                                <a href="#" class="btn dlt-gi">Delete Image</a>
                            </div>
                             <a href="#" id="addGIBtn" class="btn btn-admin">Add new gallery image</a>                    
                        </div>
                       
                    </div>
                </div>

                <hr />

                <div class="row">

                    <div class="col-4">
                        <div class="form-group">
                            <label>Beds</label>
                            <input class="form-control" type="text" name="page[bed]" value="<%= prop.bed %>" required>
                        </div>
                    </div>

                    <div class="col-4">
                        <div class="form-group">
                            <label>Baths</label>
                            <input class="form-control" type="text" name="page[bath]" value="<%= prop.bath %>" required>
                        </div>
                    </div>

                    <div class="col-4">
                        <div class="form-group">
                            <label>House Built Area</label>
                            <input class="form-control" type="text" name="page[hba]" value="<%= prop.hba %>" required>
                        </div>
                    </div>

                </div>

                <div class="row">

                    <div class="col-4">
                        <div class="form-group">
                            <label>Basement</label>
                            <input class="form-control" type="text" name="page[bsmnt]" value="<%= prop.bsmnt %>" >
                        </div>
                    </div>

                    <div class="col-4">
                        <div class="form-group">
                            <label>Terraces</label>
                            <input class="form-control" type="text" name="page[ter]" value="<%= prop.ter %>" >
                        </div>
                    </div>

                    <div class="col-4">
                        <div class="form-group">
                            <label>Swimming Pool</label>
                            <input class="form-control" type="text" name="page[swim]" value="<%= prop.swim %>" >
                        </div>
                    </div>

                </div>  

                <div class="row">

                    <div class="col-4">
                        <div class="form-group">
                            <label>Total</label>
                            <input class="form-control" type="text" name="page[total]" value="<%= prop.total %>" >
                        </div>
                    </div>

                    <div class="col-4">
                        <div class="form-group">
                            <label>Plot Area</label>
                            <input class="form-control" type="text" name="page[plot]" value="<%= prop.plot %>" >
                        </div>
                    </div>

                    <div class="col-4">
                        <div class="form-group">
                            <label>Price</label>
                            <input class="form-control" type="text" name="page[price]" value="<%= prop.price %>" >
                        </div>
                    </div>

                </div>

                <div class="admin-tools">
                    <div class="container">
                        <div class="row">
                             <button id="formSbmt" class="btn btn-primary">Update "<%= prop.title %>"</button>
                             <a id="goBack" class="btn btn-delete pull-right">Cancel</a>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
</section>
<% include ../partials/footer %>